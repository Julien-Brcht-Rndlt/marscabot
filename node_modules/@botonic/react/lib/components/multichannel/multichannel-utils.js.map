{"version":3,"sources":["../../../src/components/multichannel/multichannel-utils.js"],"names":["MULTICHANNEL_WHATSAPP_PROPS","markdown","isMultichannelButton","node","isNodeKind","isMultichannelReply","isButton","kind","type","name","elementHasUrl","element","props","url","elementHasPostback","payload","path","getFilteredElements","filter","elements","n","push","getMultichannelButtons","getMultichannelReplies","isWhatsapp","context","session","user","provider","Providers","Messaging","WHATSAPP","isFacebook","FACEBOOK"],"mappings":";;;;;;;;;;;;;;;;AAAA;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACO,IAAMA,2BAA2B,GAAG;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAApC;;;AAEA,SAASC,oBAAT,CAA8BC,IAA9B,EAAoC;AACzC,SAAOC,UAAU,CAACD,IAAD,EAAO,oBAAP,CAAjB;AACD;;AAEM,SAASE,mBAAT,CAA6BF,IAA7B,EAAmC;AACxC,SAAOC,UAAU,CAACD,IAAD,EAAO,mBAAP,CAAjB;AACD;;AAEM,SAASG,QAAT,CAAkBH,IAAlB,EAAwB;AAC7B,SAAOC,UAAU,CAACD,IAAD,EAAO,QAAP,CAAjB;AACD;;AAEM,SAASC,UAAT,CAAoBD,IAApB,EAA0BI,IAA1B,EAAgC;AACrC,SAAOJ,IAAI,CAACK,IAAL,IAAaL,IAAI,CAACK,IAAL,CAAUC,IAAV,IAAkBF,IAAtC;AACD;;AACM,SAASG,aAAT,CAAuBC,OAAvB,EAAgC;AACrC,SAAOA,OAAO,CAACC,KAAR,IAAiBD,OAAO,CAACC,KAAR,CAAcC,GAAtC;AACD;;AACM,SAASC,kBAAT,CAA4BH,OAA5B,EAAqC;AAC1C,SACGA,OAAO,CAACC,KAAR,IAAiBD,OAAO,CAACC,KAAR,CAAcG,OAAhC,IACCJ,OAAO,CAACC,KAAR,IAAiBD,OAAO,CAACC,KAAR,CAAcI,IAFlC;AAID;;AAEM,SAASC,mBAAT,CAA6Bd,IAA7B,EAAmCe,MAAnC,EAA2C;AAChD,MAAMC,QAAQ,GAAG,EAAjB;;AADgD,6CAEhChB,IAFgC;AAAA;;AAAA;AAEhD,wDAAsB;AAAA,UAAXiB,CAAW;AACpB,UAAIF,MAAM,CAACE,CAAD,CAAV,EAAeD,QAAQ,CAACE,IAAT,CAAcD,CAAd;AAChB;AAJ+C;AAAA;AAAA;AAAA;AAAA;;AAKhD,SAAOD,QAAP;AACD;;AAEM,SAASG,sBAAT,CAAgCnB,IAAhC,EAAsC;AAC3C,SAAOc,mBAAmB,CAACd,IAAD,EAAOD,oBAAP,CAA1B;AACD;;AAEM,SAASqB,sBAAT,CAAgCpB,IAAhC,EAAsC;AAC3C,SAAOc,mBAAmB,CAACd,IAAD,EAAOE,mBAAP,CAA1B;AACD;;AAEM,IAAMmB,UAAU,GAAG,SAAbA,UAAa,CAAAC,OAAO;AAAA,SAC/BA,OAAO,CAACC,OAAR,IACAD,OAAO,CAACC,OAAR,CAAgBC,IADhB,IAEAF,OAAO,CAACC,OAAR,CAAgBC,IAAhB,CAAqBC,QAArB,IAAiCC,gBAAUC,SAAV,CAAoBC,QAHtB;AAAA,CAA1B;;;;AAKA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAP,OAAO;AAAA,SAC/BA,OAAO,CAACC,OAAR,IACAD,OAAO,CAACC,OAAR,CAAgBC,IADhB,IAEAF,OAAO,CAACC,OAAR,CAAgBC,IAAhB,CAAqBC,QAArB,IAAiCC,gBAAUC,SAAV,CAAoBG,QAHtB;AAAA,CAA1B","sourcesContent":["import { Providers } from '@botonic/core'\n\n/**\n *\n * Whatsapp does not support Markdown\n * (its markup syntax is different)\n */\nexport const MULTICHANNEL_WHATSAPP_PROPS = { markdown: false }\n\nexport function isMultichannelButton(node) {\n  return isNodeKind(node, 'MultichannelButton')\n}\n\nexport function isMultichannelReply(node) {\n  return isNodeKind(node, 'MultichannelReply')\n}\n\nexport function isButton(node) {\n  return isNodeKind(node, 'Button')\n}\n\nexport function isNodeKind(node, kind) {\n  return node.type && node.type.name == kind\n}\nexport function elementHasUrl(element) {\n  return element.props && element.props.url\n}\nexport function elementHasPostback(element) {\n  return (\n    (element.props && element.props.payload) ||\n    (element.props && element.props.path)\n  )\n}\n\nexport function getFilteredElements(node, filter) {\n  const elements = []\n  for (const n of node) {\n    if (filter(n)) elements.push(n)\n  }\n  return elements\n}\n\nexport function getMultichannelButtons(node) {\n  return getFilteredElements(node, isMultichannelButton)\n}\n\nexport function getMultichannelReplies(node) {\n  return getFilteredElements(node, isMultichannelReply)\n}\n\nexport const isWhatsapp = context =>\n  context.session &&\n  context.session.user &&\n  context.session.user.provider == Providers.Messaging.WHATSAPP\n\nexport const isFacebook = context =>\n  context.session &&\n  context.session.user &&\n  context.session.user.provider == Providers.Messaging.FACEBOOK\n"],"file":"multichannel-utils.js"}