{"version":3,"sources":["../../src/util/dom.js"],"names":["getScrollableArea","webchatElement","getArea","area","botonicScrollableContent","querySelector","WEBCHAT","SELECTORS","SCROLLABLE_CONTENT","scrollableArea","full","SIMPLEBAR_CONTENT","visible","SIMPLEBAR_WRAPPER","scrollToBottom","timeout","behavior","host","getWebchatElement","frame","setTimeout","scrollTo","top","scrollHeight","DEFAULTS","ID","onDOMLoaded","callback","test","document","readyState","addEventListener","isShadowDOMSupported","head","createShadowRoot","attachShadow","e"],"mappings":";;;;;;;AAAA;;AAEO,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,cAAc,EAAI;AACjD,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAC,IAAI,EAAI;AACtB,QAAMC,wBAAwB,GAAGH,cAAc,CAACI,aAAf,CAC/BC,mBAAQC,SAAR,CAAkBC,kBADa,CAAjC;AAGA,QAAMC,cAAc,GAClBL,wBAAwB,IAAIA,wBAAwB,CAACC,aAAzB,CAAuCF,IAAvC,CAD9B;AAEA,WAAOM,cAAP;AACD,GAPD;;AAQA,SAAO;AACLC,IAAAA,IAAI,EAAER,OAAO,CAACI,mBAAQC,SAAR,CAAkBI,iBAAnB,CADR;AAELC,IAAAA,OAAO,EAAEV,OAAO,CAACI,mBAAQC,SAAR,CAAkBM,iBAAnB;AAFX,GAAP;AAID,CAbM;;;;AAeA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAInB;AAAA,iFAAP,EAAO;AAAA,0BAHTC,OAGS;AAAA,MAHTA,OAGS,6BAHC,GAGD;AAAA,2BAFTC,QAES;AAAA,MAFTA,QAES,8BAFE,QAEF;AAAA,MADTC,IACS,QADTA,IACS;;AACT,MAAMhB,cAAc,GAAGiB,iBAAiB,CAACD,IAAD,CAAxC;AACA,MAAI,CAAChB,cAAL,EAAqB;AACrB,MAAMkB,KAAK,GAAGnB,iBAAiB,CAACC,cAAD,CAAjB,CAAkCW,OAAhD;;AACA,MAAIO,KAAJ,EAAW;AACTC,IAAAA,UAAU,CACR;AAAA,aAAMD,KAAK,CAACE,QAAN,CAAe;AAAEC,QAAAA,GAAG,EAAEH,KAAK,CAACI,YAAb;AAA2BP,QAAAA,QAAQ,EAAEA;AAArC,OAAf,CAAN;AAAA,KADQ,EAERD,OAFQ,CAAV;AAID;AACF,CAdM;;;;AAgBA,IAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAD,IAAI;AAAA,SACnCA,IAAI,IAAIA,IAAI,CAACZ,aAAL,YAAuBC,mBAAQkB,QAAR,CAAiBC,EAAxC,EAD2B;AAAA,CAA9B,C,CAGP;;;;;AACO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAAC,QAAQ,EAAI;AACrC,MAAI,8BAA8BC,IAA9B,CAAmCC,QAAQ,CAACC,UAA5C,CAAJ,EAA6D;AAC3D;AACA;AACAH,IAAAA,QAAQ;AACT,GAJD,MAIO;AACL;AACAE,IAAAA,QAAQ,CAACE,gBAAT,CAA0B,kBAA1B,EAA8CJ,QAA9C,EAAwD,KAAxD;AACD;AACF,CATM;;;;AAWA,IAAMK,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACxC,MAAI;AACF,WAAOH,QAAQ,CAACI,IAAT,CAAcC,gBAAd,IAAkCL,QAAQ,CAACI,IAAT,CAAcE,YAAvD;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACV,WAAO,KAAP;AACD;AACF,CANM","sourcesContent":["import { WEBCHAT } from '../constants'\n\nexport const getScrollableArea = webchatElement => {\n  const getArea = area => {\n    const botonicScrollableContent = webchatElement.querySelector(\n      WEBCHAT.SELECTORS.SCROLLABLE_CONTENT\n    )\n    const scrollableArea =\n      botonicScrollableContent && botonicScrollableContent.querySelector(area)\n    return scrollableArea\n  }\n  return {\n    full: getArea(WEBCHAT.SELECTORS.SIMPLEBAR_CONTENT),\n    visible: getArea(WEBCHAT.SELECTORS.SIMPLEBAR_WRAPPER),\n  }\n}\n\nexport const scrollToBottom = ({\n  timeout = 200,\n  behavior = 'smooth',\n  host,\n} = {}) => {\n  const webchatElement = getWebchatElement(host)\n  if (!webchatElement) return\n  const frame = getScrollableArea(webchatElement).visible\n  if (frame) {\n    setTimeout(\n      () => frame.scrollTo({ top: frame.scrollHeight, behavior: behavior }),\n      timeout\n    )\n  }\n}\n\nexport const getWebchatElement = host =>\n  host && host.querySelector(`#${WEBCHAT.DEFAULTS.ID}`)\n\n// https://stackoverflow.com/questions/9457891/how-to-detect-if-domcontentloaded-was-fired\nexport const onDOMLoaded = callback => {\n  if (/complete|interactive|loaded/.test(document.readyState)) {\n    // In case the document has finished parsing, document's readyState will\n    // be one of \"complete\", \"interactive\" or (non-standard) \"loaded\".\n    callback()\n  } else {\n    // The document is not ready yet, so wait for the DOMContentLoaded event\n    document.addEventListener('DOMContentLoaded', callback, false)\n  }\n}\n\nexport const isShadowDOMSupported = () => {\n  try {\n    return document.head.createShadowRoot || document.head.attachShadow\n  } catch (e) {\n    return false\n  }\n}\n"],"file":"dom.js"}