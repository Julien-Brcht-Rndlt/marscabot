{"version":3,"sources":["../../../src/webchat/devices/device-adapter.js"],"names":["DeviceAdapter","host","currentDevice","navigator","platform","webchatResizer","WebchatResizer","scrollbarController","ScrollbarController","handleScrollEvents","DEVICES","MOBILE","IPHONE","timeout","onFocus","handleOnTouchMoveEvents","onBlur","defaultFontSize"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;IAEaA,a;;;;;;;WACX,cAAKC,IAAL,EAAW;AACT,WAAKC,aAAL,GAAqBC,SAAS,CAACC,QAA/B;AACA,WAAKC,cAAL,GAAsB,IAAIC,8BAAJ,CAAmB,KAAKJ,aAAxB,EAAuCD,IAAvC,CAAtB;AACA,WAAKM,mBAAL,GAA2B,IAAIC,wCAAJ,CAAwB,KAAKN,aAA7B,EAA4CD,IAA5C,CAA3B;AACA,WAAKM,mBAAL,CAAyBE,kBAAzB;AACD;;;WAED,iBAAQR,IAAR,EAAc;AAAA;;AACZ,UAAI,KAAKC,aAAL,KAAuBQ,UAAQC,MAAR,CAAeC,MAA1C,EAAkD;AAChD,iCAAe;AAAEX,UAAAA,IAAI,EAAJA,IAAF;AAAQY,UAAAA,OAAO,EAAE;AAAjB,SAAf;AACA;AACD;;AACD,WAAKR,cAAL,CAAoBS,OAApB,CAA4B;AAAA,eAC1B,KAAI,CAACP,mBAAL,CAAyBQ,uBAAzB,EAD0B;AAAA,OAA5B;AAGD;;;WAED,kBAAS;AACP,UAAI,KAAKb,aAAL,KAAuBQ,UAAQC,MAAR,CAAeC,MAA1C,EAAkD;AAClD,WAAKP,cAAL,CAAoBW,MAApB;AACA,WAAKT,mBAAL,CAAyBQ,uBAAzB;AACD;;;WAED,oBAA+B;AAAA,UAAtBE,eAAsB,uEAAJ,EAAI;AAC7B,UAAI,KAAKf,aAAL,KAAuBQ,UAAQC,MAAR,CAAeC,MAA1C,EAAkD,OAAOK,eAAP,CADrB,CAE7B;;AACA,aAAO,SAAP;AACD","sourcesContent":["import { scrollToBottom } from '../../util/dom'\nimport { DEVICES } from '.'\nimport { ScrollbarController } from './scrollbar-controller'\nimport { WebchatResizer } from './webchat-resizer'\n\nexport class DeviceAdapter {\n  init(host) {\n    this.currentDevice = navigator.platform\n    this.webchatResizer = new WebchatResizer(this.currentDevice, host)\n    this.scrollbarController = new ScrollbarController(this.currentDevice, host)\n    this.scrollbarController.handleScrollEvents()\n  }\n\n  onFocus(host) {\n    if (this.currentDevice !== DEVICES.MOBILE.IPHONE) {\n      scrollToBottom({ host, timeout: 800 })\n      return\n    }\n    this.webchatResizer.onFocus(() =>\n      this.scrollbarController.handleOnTouchMoveEvents()\n    )\n  }\n\n  onBlur() {\n    if (this.currentDevice !== DEVICES.MOBILE.IPHONE) return\n    this.webchatResizer.onBlur()\n    this.scrollbarController.handleOnTouchMoveEvents()\n  }\n\n  fontSize(defaultFontSize = 14) {\n    if (this.currentDevice !== DEVICES.MOBILE.IPHONE) return defaultFontSize\n    // Disabling auto-zoom on input (iPhone devices): https://stackoverflow.com/a/25614477, https://stackoverflow.com/a/6394497\n    return 'initial'\n  }\n}\n"],"file":"device-adapter.js"}